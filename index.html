<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Physical Activity Visualisations - Victoria</title>
  <!-- Include Vega, Vega-Lite, and Vega-Embed -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h1 {
      text-align: center;
    }
    .chart {
      margin: 30px 0;
    }
  </style>
</head>
<body>
  <h1>Physical Activity in Victoria</h1>

  <div id="chart1" class="chart"></div>
  <div id="chart2" class="chart"></div>

  <script>
    // Chart 1: Motivation for participation
    const motivationSpec = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "Sources of Motivation for Engagement in Physical Activity - Victoria",
  "width": 700,
  "height": 450,
  "data": {
    "url": "https://raw.githubusercontent.com/SinethWicky/fit3179_w10_hw_sineth_wickramasinghe/refs/heads/main/motivation_tidy_vic.csv"
  },
  "params": [
    {
      "name": "ageGroup",
      "value": "All",
      "bind": {
        "input": "select",
        "options": ["All", "15-17", "18-24", "25-34", "35-44", "45-54", "55-64", "65+"],
        "labels": ["All", "15–17", "18–24", "25–34", "35–44", "45–54", "55–64", "65+"]
      }
    }
  ],
  "transform": [
    {"filter": "datum.Group == ageGroup"}
  ],
  "mark": "bar",
  "encoding": {
    "x": {
      "field": "Motivation",
      "type": "ordinal",
      "sort": "-y",
      "axis": {"labelAngle": -40, "title": "Motivation"}
    },
    "y": {
      "field": "Value",
      "type": "quantitative",
      "title": "Proportion of Participants (%)"
    },
    "tooltip": [
      {"field": "Motivation", "type": "ordinal"},
      {"field": "Value", "type": "quantitative"}
    ],
    "color": {
      "field": "Motivation",
      "type": "nominal",
      "scale": {"scheme": "category20"},
      "legend": null
    }
  }
};

    // Chart 2: Activity Locations by Gender
    const activitySpec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": 800,
      "height": 400,
      "title": "Participation in Physical Activity by Location and Gender - Victoria",
      "data": {
        "url": "https://raw.githubusercontent.com/SinethWicky/fit3179_w10_hw_sineth_wickramasinghe/refs/heads/main/activity_locations_tidy_vic.csv",
        "format": {"type": "csv"}
      },
      "transform": [
        {"filter": "datum.Group === 'Males' || datum.Group === 'Females'"}
      ],
      "selection": {
        "highlightGender": {"type": "multi", "fields": ["Group"], "bind": "legend"}
      },
      "mark": {"type": "bar"},
      "encoding": {
        "x": {"field": "Place", "type": "ordinal", "axis": {"labelAngle": -45}},
        "y": {"field": "Value", "type": "quantitative"},
        "color": {"field": "Group", "type": "nominal", "title": "Gender", "scale": {"scheme": "category10"}},
        "xOffset": {"field": "Group"},
        "opacity": {"condition": {"selection": "highlightGender", "value": 1}, "value": 0.3},
        "tooltip": [{"field": "Place"}, {"field": "Value"}, {"field": "Group"}]
      }
    };

    // Embed the charts
    vegaEmbed('#chart1', motivationSpec);
    vegaEmbed('#chart2', activitySpec);
  </script>
</body>
</html>
